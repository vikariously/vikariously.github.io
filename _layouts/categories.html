---
layout: page
---

{{ content }}

{% comment %}
Build a hash of categories from the recipes collection
{% endcomment %}
{% assign all_categories = "" | split: "" %}
{% for recipe in site.recipes %}
  {% if recipe.categories %}
    {% for category in recipe.categories %}
      {% unless all_categories contains category %}
        {% assign all_categories = all_categories | push: category %}
      {% endunless %}
    {% endfor %}
  {% endif %}
{% endfor %}

{% assign all_categories = all_categories | sort %}

{% comment %}
Build category index with counts
{% endcomment %}
<ul class="taxonomy-index">
  {% for category in all_categories %}
    {% assign category_count = 0 %}
    {% for recipe in site.recipes %}
      {% if recipe.categories contains category %}
        {% assign category_count = category_count | plus: 1 %}
      {% endif %}
    {% endfor %}
    <li>
      <a href="#{{ category | slugify }}">
        <strong>{{ category }}</strong> <span class="taxonomy-count">{{ category_count }}</span>
      </a>
    </li>
  {% endfor %}
</ul>

{% comment %}
Display recipes grouped by category
{% endcomment %}
{% for category in all_categories %}
  <section id="{{ category | slugify | downcase }}" class="taxonomy-section">
    <h2 class="taxonomy-title">{{ category }}</h2>
    <div class="entries-{{ page.entries_layout | default: 'list' }}">
      {% for recipe in site.recipes %}
        {% if recipe.categories contains category %}
          {% assign entry = recipe %}
          {% include entry.html %}
        {% endif %}
      {% endfor %}
    </div>
    <a href="#page-title" class="back-to-top">{{ site.data.text[site.locale].back_to_top | default: 'Back to Top' }} &uarr;</a>
  </section>
{% endfor %}
