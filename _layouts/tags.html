---
layout: page
---

{{ content }}

{% comment %}
Build a hash of tags from the recipes collection
{% endcomment %}
{% assign all_tags = "" | split: "" %}
{% assign liquor_tags = "" | split: "" %}
{% assign ingredient_tags = "" | split: "" %}

{% for recipe in site.recipes %}
  {% if recipe.tags %}
    {% for tag in recipe.tags %}
      {% unless all_tags contains tag %}
        {% assign all_tags = all_tags | push: tag %}
        {% if tag contains "Liquor:" %}
          {% assign liquor_tags = liquor_tags | push: tag %}
        {% else %}
          {% assign ingredient_tags = ingredient_tags | push: tag %}
        {% endif %}
      {% endunless %}
    {% endfor %}
  {% endif %}
{% endfor %}

{% assign ingredient_tags = ingredient_tags | sort %}
{% assign liquor_tags = liquor_tags | sort %}

{% comment %}
Build ingredient tag index with counts
{% endcomment %}
<h2 class="taxonomy-section-title">Ingredients</h2>
<ul class="taxonomy-index">
  {% for tag in ingredient_tags %}
    {% assign tag_count = 0 %}
    {% for recipe in site.recipes %}
      {% if recipe.tags contains tag %}
        {% assign tag_count = tag_count | plus: 1 %}
      {% endif %}
    {% endfor %}
    <li>
      <a href="#{{ tag | slugify }}">
        <strong>{{ tag }}</strong> <span class="taxonomy-count">{{ tag_count }}</span>
      </a>
    </li>
  {% endfor %}
</ul>

{% comment %}
Build liquor tag index with counts
{% endcomment %}
{% if liquor_tags.size > 0 %}
  <h2 class="taxonomy-section-title">Liquor</h2>
  <ul class="taxonomy-index">
    {% for tag in liquor_tags %}
      {% assign tag_count = 0 %}
      {% for recipe in site.recipes %}
        {% if recipe.tags contains tag %}
          {% assign tag_count = tag_count | plus: 1 %}
        {% endif %}
      {% endfor %}
      <li>
        <a href="#{{ tag | slugify }}">
          <strong>{{ tag }}</strong> <span class="taxonomy-count">{{ tag_count }}</span>
        </a>
      </li>
    {% endfor %}
  </ul>
{% endif %}

{% comment %}
Display recipes grouped by tag - ingredients first, then liquor
{% endcomment %}
{% for tag in ingredient_tags %}
  <section id="{{ tag | slugify | downcase }}" class="taxonomy-section">
    <h2 class="taxonomy-title">{{ tag }}</h2>
    <div class="entries-{{ page.entries_layout | default: 'list' }}">
      {% for recipe in site.recipes %}
        {% if recipe.tags contains tag %}
          {% assign entry = recipe %}
          {% include entry.html %}
        {% endif %}
      {% endfor %}
    </div>
    <a href="#page-title" class="back-to-top">{{ site.data.text[site.locale].back_to_top | default: 'Back to Top' }} &uarr;</a>
  </section>
{% endfor %}

{% comment %}
Display liquor recipes at the bottom
{% endcomment %}
{% for tag in liquor_tags %}
  <section id="{{ tag | slugify | downcase }}" class="taxonomy-section">
    <h2 class="taxonomy-title">{{ tag }}</h2>
    <div class="entries-{{ page.entries_layout | default: 'list' }}">
      {% for recipe in site.recipes %}
        {% if recipe.tags contains tag %}
          {% assign entry = recipe %}
          {% include entry.html %}
        {% endif %}
      {% endfor %}
    </div>
    <a href="#page-title" class="back-to-top">{{ site.data.text[site.locale].back_to_top | default: 'Back to Top' }} &uarr;</a>
  </section>
{% endfor %}
